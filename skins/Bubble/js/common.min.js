var Skin={init:function(){$("#headerDown").click((function(){$("html, body").animate({scrollTop:$(window).height()},300)})),$(window).scroll((function(o){$(".fn__progress").attr("value",parseInt($(window).scrollTop())).attr("max",parseInt($("body").outerHeight()-$(window).height())),$(window).scrollTop()>$(window).height()/2-20?($(".side__menu").addClass("side__menu--edge"),$("#sideTop").removeClass("side__top--bottom")):($(".side__menu").removeClass("side__menu--edge"),$("#sideTop").addClass("side__top--bottom"))})),$(".side__menu").click((function(){$(".side__main").addClass("side__main--show").show()})),$(".side__bg, .side__close").click((function(){$(".side__main").removeClass("side__main--show"),setTimeout((function(){$(".side__main").hide()}),1e3)})),$("#sideTop").click((function(){$(this).hasClass("side__top--bottom")?Util.goBottom():Util.goTop()}));var o=0,e=$(".header__h1").text();document.addEventListener("visibilitychange",(function(){o&&clearTimeout(o),document.hidden?o=setTimeout((function(){document.title="(\u25cd\xb4\ua4b3`\u25cd) - "+e}),500):(document.title="(*\xb4\u2207\uff40*) \u6b22\u8fce\u56de\u6765\uff01",o=setTimeout((function(){document.title=e}),1e3))}),!1),new Ribbons({colorSaturation:"60%",colorBrightness:"50%",colorAlpha:.5,colorCycleSpeed:5,verticalPosition:"random",horizontalSpeed:200,ribbonCount:3,strokeSize:0,parallaxAmount:-.2,animateSections:!0}),1!==$("#comments").length&&($(window).scroll(),$(".header").circleMagic({clearOffset:.3,color:"rgba(255,255,255, .2)",density:.2,radius:15}))},initArticle:function(){page.share(),initCanvas("articleTop"),$(window).width()>=768?$(".post__toc").css({left:document.querySelector(".article__content").getBoundingClientRect().right+20,right:"auto",display:"block"}):$(".side__top--toc").click((function(){$(".post__toc").slideToggle()}));var o=$(".vditor-reset [id^=b3_solo_h]"),e=$(".article__toc");e.find("a").click((function(o){var e=$(this).attr("href");return window.location.hash=e,$(window).scrollTop($(e).offset().top),$(window).width()<768&&$(".post__toc").slideToggle(),o.preventDefault(),o.stopPropagation(),!1})),$(window).scroll((function(t){if(0===$(".article__toc li").length)return!1;var i=[];o.each((function(o){i.push({id:this.id,offsetTop:$(this).offset().top})}));for(var n=$(window).scrollTop()+10,s=0,d=i.length;s<d;s++)if(n<i[s].offsetTop){e.find("li").removeClass("current");var l=s>0?s-1:0;e.find('a[href="#'+i[l].id+'"]').parent().addClass("current");break}n>=i[i.length-1].offsetTop&&(e.find("li").removeClass("current"),e.find("li:last").addClass("current"))})),$(window).scroll()}};$(document).ready((function(){Skin.init()}));