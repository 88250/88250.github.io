<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>以太坊 JavaScript API web3.js 打币 - D 的个人博客</title><meta name="description" content="ABI 简介 关于什么是 ABI（Application Binary Interface）请看官网文档。简单来说 ABI 就是外界和合约交互的方式： ABI 用 JSON 描述合约的接口定义用约定好的编码方式进行实际调用 做过 RPC 的同学可以理解为这就是异构平台的 RPC 实现，需要进行接口定义、存根生成、寻址、序列化、网络通讯等步骤就能调用到合约上的函数了。 ABI 的实例请看这里。 web3.js 简介 web3.js 是以太坊 JavaScript API 的官方实现，用它来和以太坊节点进行可编程通讯，基于 HTTP 或 IPC 连接。简单来说 web3.js 就是可以通过 JavaScript 调用本地或远程的以太坊节点，完成网络管理、账户管理、交易等操作。 下面的代码示例基于 web3.js v1.0 开发，请注意不同版本之间的差异。 同步区块 人们都说以太坊发币最大的技术难点就是同步区块，一点儿没错！ 试了 ETHFANS 星火计划提供的静态节点也不行，最后还是放弃本地电脑同步，主要问题是我家这里的网络质量太差，很多时候藕断丝连。 后来在阿里云海外节点开了台服务器几...."/><meta property="og:description" content="ABI 简介 关于什么是 ABI（Application Binary Interface）请看官网文档。简单来说 ABI 就是外界和合约交互的方式： ABI 用 JSON 描述合约的接口定义用约定好的编码方式进行实际调用 做过 RPC 的同学可以理解为这就是异构平台的 RPC 实现，需要进行接口定义、存根生成、寻址、序列化、网络通讯等步骤就能调用到合约上的函数了。 ABI 的实例请看这里。 web3.js 简介 web3.js 是以太坊 JavaScript API 的官方实现，用它来和以太坊节点进行可编程通讯，基于 HTTP 或 IPC 连接。简单来说 web3.js 就是可以通过 JavaScript 调用本地或远程的以太坊节点，完成网络管理、账户管理、交易等操作。 下面的代码示例基于 web3.js v1.0 开发，请注意不同版本之间的差异。 同步区块 人们都说以太坊发币最大的技术难点就是同步区块，一点儿没错！ 试了 ETHFANS 星火计划提供的静态节点也不行，最后还是放弃本地电脑同步，主要问题是我家这里的网络质量太差，很多时候藕断丝连。 后来在阿里云海外节点开了台服务器几...."/>    <meta name="keywords" content="88250"/><link rel="dns-prefetch" href="https://88250.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://88250.github.io"><link rel="icon" type="image/png" href="https://img.hacpai.com/avatar/1353745196354_1572999872077.png?imageView2/1/w/256/h/256/q/100"/><link rel="apple-touch-icon" href="https://img.hacpai.com/avatar/1353745196354_1572999872077.png?imageView2/1/w/256/h/256/q/100"><link rel="shortcut icon" type="image/x-icon" href="https://img.hacpai.com/avatar/1353745196354_1572999872077.png?imageView2/1/w/256/h/256/q/100"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="以太坊 JavaScript API web3.js 打币 - D 的个人博客"/><meta property="og:site_name" content="D 的个人博客"/><meta property="og:url"      content="https://88250.github.io/articles/2018/03/09/1520583695227.html?"/><meta property="og:image" content="https://img.hacpai.com/avatar/1353745196354_1572999872077.png?imageView2/1/w/256/h/256/q/100"/><link rel="search" type="application/opensearchdescription+xml" title="以太坊 JavaScript API web3.js 打币 - D 的个人博客" href="/opensearch.xml"><link href="https://88250.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://88250.github.io/manifest.json">        <link rel="canonical" href="https://88250.github.io/articles/2018/03/09/1520583695227.html">        <link rel="stylesheet"
              href="https://88250.github.io/skins/Pinghsu/css/base.css?1578447774338"/>
            <link rel="prev" title="重装系统后 git 烂了" href="https://88250.github.io/articles/2018/02/24/1519471473213.html">
            <link rel="next" title="以太坊同步一直“卡着”的原因" href="https://88250.github.io/articles/2018/03/11/1520767628593.html">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144185520-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144185520-1');
</script></head>
<body>
<header class="header">
    <div class="wrapper">
        <a href="https://88250.github.io" rel="start" class="header__logo">
            <img src="https://img.hacpai.com/avatar/1353745196354_1572999872077.png?imageView2/1/w/128/h/128/interlace/0/q/100"/>
        D 的个人博客
        </a>

        <nav class="header__nav mobile__none">
            <a href="https://88250.github.io/tags.html" rel="section">
                Tags
            </a>
            <a href="https://88250.github.io/archives.html">
                Archives
            </a>
            <a rel="archive" href="https://88250.github.io/links.html">
                Links
            </a>
            <a href="https://88250.github.io/search" class="search">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path fill="#444" d="M19.385 11.846c0-4.156-3.382-7.538-7.538-7.538s-7.538 3.382-7.538 7.538 3.382 7.538 7.538 7.538 7.538-3.382 7.538-7.538zM28 25.846c0 1.178-0.976 2.154-2.154 2.154-0.572 0-1.127-0.236-1.514-0.639l-5.772-5.755c-1.969 1.363-4.325 2.087-6.714 2.087-6.546 0-11.846-5.3-11.846-11.846s5.3-11.846 11.846-11.846 11.846 5.3 11.846 11.846c0 2.389-0.724 4.745-2.087 6.714l5.772 5.772c0.387 0.387 0.623 0.942 0.623 1.514z"></path>
                </svg>
            </a>
        </nav>

        <div class="header__bar fn__none" onclick="$(this).next().slideToggle()">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path fill="#444" d="M0 3h20v2h-20v-2zM0 9h20v2h-20v-2zM0 15h20v2h-20v-2z"></path>
            </svg>
        </div>
        <main class="header__menu fn__none">
            <ul>
                <li>
                    <a href="https://88250.github.io/start">
                        <i class="icon__login"></i> 开始使用
                    </a>
                </li>
                <li>
                    <a href="https://88250.b3log.org/about" target="_self" rel="section">
                        关于我
                    </a>
                </li>
                <li>
                    <a href="/my-github-repos" target="_self" rel="section">
                        我的开源
                    </a>
                </li>
                <li>
                    <a href="https://hacpai.com" target="_blank" rel="section">
                        黑客派
                    </a>
                </li>
                <li>
                    <a href="https://b3log.org" target="_blank" rel="section">
                        B3log
                    </a>
                </li>
                <li>
                    <a href="https://88250.github.io/tags.html" rel="section">
                        Tags
                    </a>
                </li>
                <li>
                    <a href="https://88250.github.io/archives.html">
                        Archives
                    </a>
                </li>
                <li>
                    <a rel="archive" href="https://88250.github.io/links.html">
                        Links
                    </a>
                </li>
                <li>
                    <a href="https://88250.github.io/search">
                        Search
                    </a>
                </li>
                <li>
                    <a rel="alternate" href="https://88250.github.io/rss.xml" rel="section">
                        RSS
                    </a>
                </li>
            </ul>
        </main>
    </div>
</header><main id="pjax" class="fn__flex-1">
    
    <div class="post wrapper wrapper--miner">
        <h2 class="item__title">
            <a rel="bookmark" href="https://88250.github.io/articles/2018/03/09/1520583695227.html">
                以太坊 JavaScript API web3.js 打币
            </a>
        </h2>
        <div class="ft__fade item__meta">
                Updated on
            <time>
                Jul 20, 2018
            </time>
            with <span data-uvstaturl="https://88250.github.io/articles/2018/03/09/1520583695227.html">0</span> views
                and <a href="#comments">9 comments</a>
        </div>
        <div class="item__tags">
                <a rel="tag" class="tag tag--0" href="https://88250.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE">
                    <b># 区块链</b>
                </a>
                <a rel="tag" class="tag tag--1" href="https://88250.github.io/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A">
                    <b># 以太坊</b>
                </a>
                <a rel="tag" class="tag tag--2" href="https://88250.github.io/tags/Web3">
                    <b># Web3</b>
                </a>
                <a rel="tag" class="tag tag--3" href="https://88250.github.io/tags/ABI">
                    <b># ABI</b>
                </a>
        </div>
        <div class="vditor-reset">
            <p><img src="https://img.hacpai.com/e/20d13d1dcdc5487e926182af71e03616.jpeg?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="Ethereum"></p>
<h2 id="b3_solo_h2_0">ABI 简介</h2>
<p>关于什么是 ABI（Application Binary Interface）请看<a href="https://solidity.readthedocs.io/en/develop/abi-spec.html" target="_blank">官网文档</a>。简单来说 ABI 就是外界和合约交互的方式：</p>
<ul>
<li>ABI 用 JSON 描述合约的接口定义</li>
<li>用约定好的编码方式进行实际调用</li>
</ul>
<p>做过 RPC 的同学可以理解为这就是异构平台的 RPC 实现，需要进行接口定义、存根生成、寻址、序列化、网络通讯等步骤就能调用到合约上的函数了。</p>
<p>ABI 的实例请看<a href="https://etherscan.io/address/0xe249e7a6f5a9efee03b4c5090c77245ef6fe0f5e#code" target="_blank">这里</a>。</p>
<h2 id="b3_solo_h2_1">web3.js 简介</h2>
<p><a href="https://github.com/ethereum/web3.js" target="_blank">web3.js</a> 是以太坊 JavaScript API 的官方实现，用它来和以太坊节点进行可编程通讯，基于 HTTP 或 IPC 连接。简单来说 web3.js 就是可以通过 JavaScript 调用本地或远程的以太坊节点，完成网络管理、账户管理、交易等操作。</p>
<p>下面的代码示例基于 web3.js <code>v1.0</code> 开发，请注意不同版本之间的差异。</p>
<h2 id="b3_solo_h2_2">同步区块</h2>
<p>人们都说以太坊发币最大的技术难点就是同步区块，一点儿没错！</p>
<p>试了 <a href="http://ethfans.org" target="_blank">ETHFANS</a> 星火计划提供的静态节点也不行，最后还是放弃本地电脑同步，主要问题是我家这里的网络质量太差，很多时候藕断丝连。</p>
<p>后来在阿里云<strong>海外节点</strong>开了台服务器几个小时就同步好了（国内节点我也试过，一晚上没同步好，没耐心就放弃了），下面给出服务器配置大家可以参考下：</p>
<ul>
<li>内存至少 4G，否则 geth 进程会被 OOM Killer 干掉或者各种崩溃</li>
<li>磁盘至少 100G（区块高度 530W）</li>
<li>带宽我开的是 5M</li>
</ul>
<p>同步使用<a href="https://geth.ethereum.org/install" target="_blank">官方 geth</a>就行，启动不用带参。每次下载最新的 geth 后最好浏览一下帮助，避免用了过时的参数而掉坑里。</p>
<h2 id="b3_solo_h2_3">交易（打币/转账）</h2>
<p>前面铺垫完，正式进入今天的主题：如何通过 web3.js 打币。我们大致需要用到如下几个 API（看命名就懂的 API 我就不啰嗦了）：</p>
<ul>
<li>personal.unlockAccount：调用后等待用户输入对应解锁账户的私钥密码完成解锁</li>
<li>eth.sendTransaction：发送交易到以太坊网络，返回交易哈希</li>
<li>eth.contract：合约接口</li>
</ul>
<p>先启动 geth 的交互式可执行环境：<code>geth attach</code>（Windows 上面<em>可能</em>需要用 <code>geth attach ipc:\\.\pipe\geth.ipc</code>），然后分两种打币情况：以太坊、ERC20 令牌。</p>
<h3 id="b3_solo_h3_4">以太坊转账</h3>
<p>这种情况是最简单的，只需两步：</p>
<ol>
<li>解锁源账户</li>
<li>执行转账</li>
</ol>
<pre><code class="language-js">personal.unlockAccount(fromAddr); // 输入正确的私钥密码后将允许进行交易操作
eth.sendTransaction({from: fromAddr, to: toAddr, value: web3.toWei(0.1, "ether")}); // 转账 0.1 eth
</code></pre>
<h3 id="b3_solo_h3_5">ERC20 令牌转账</h3>
<ol>
<li>构造 ERC20 令牌合约操作对象</li>
<li>解锁源账户</li>
<li>调用 ERC20 令牌转账接口执行转账</li>
</ol>
<pre><code class="language-js">var tokenContractABI = [....] // JSON ABI
var contractAddr = "0xe249e7a6f5a9efee03b4c5090c77245ef6fe0f5e";
var tokenContract = eth.contract(tokenContractABI).at(contractAddr); // 构造合约对象

var fromAddr = "0xb3d201b5963db83c434e5810b54ac62e3ee05c00"; // 源账户地址
tokenContract.balanceOf(fromAddr); // 查看令牌余额
var amount = 20000;  // 转账金额
var toAddr = "0x.."; // 目标账户地址

personal.unlockAccount(fromAddr); // 输入正确的私钥密码后将允许进行交易操作
tokenContract.transfer(toAddr, web3.toWei(amount), {from: fromAddr}); // 执行令牌转账 
</code></pre>
<h2 id="b3_solo_h2_6">事件处理</h2>
<p>主要使用场景是发送交易后等待网络确认，然后通知外部程序做相应的处理；也用于和合约定义的事件进行交互。</p>
<h3 id="b3_solo_h3_7">使用回调</h3>
<pre><code class="language-js">eth.sendTransaction({
    from: '0x..',
    to: '0x..',
    value: '10000'
}, function(error, hash){
    ...
});
</code></pre>
<h3 id="b3_solo_h3_8">使用 Promise</h3>
<pre><code class="language-js">eth.sendTransaction({
    from: '0x..',
    to: '0x..',
    value: '10000'
}).then(function(receipt){
    ...
});
</code></pre>
<h3 id="b3_solo_h3_9">使用监听</h3>
<pre><code class="language-js">eth.sendTransaction({
    from: '0x..',
    to: '0x..',
    value: '10000'
}).on('transactionHash', function(hash) {
    ...
}).on('receipt', function(receipt) {
    ...
}).on('confirmation', function(confirmationNumber, receipt) { 
    ... 
}).on('error', console.error);
</code></pre>
<h2 id="b3_solo_h2_10">总结</h2>
<p>web3.js 是以太坊的 JavaScript API 实现，作为交互式可执行环境被集成在了 以太坊节点 geth 中，也可以单独引入 JavaScript 应用中进行使用。它提供了通过 JS 和以太坊网络、智能合约交互的方式，开箱即用。对于新手来说，学习以太坊开发的最大难点是区块同步，当然也可以使用测试网络或者自建私网来进行开发调试。</p>
<p>关于更多以太坊、区块链开发的干货，请浏览黑客派社区<a href="https://hacpai.com/tag/ethereum" target="_blank">以太坊</a>、<a href="https://hacpai.com/tag/blockchain" target="_blank">区块链</a>。</p>
                <div>
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5357405790190342"
     data-ad-slot="9726081163"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
                </div>
        </div>
    </div>
    <div class="post__toc">
<ul class="article__toc">
        <li class="toc__h2">
            <a href="#b3_solo_h2_0">ABI 简介</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_1">web3.js 简介</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_2">同步区块</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_3">交易（打币/转账）</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_4">以太坊转账</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_5">ERC20 令牌转账</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_6">事件处理</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_7">使用回调</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_8">使用 Promise</a>
        </li>
        <li class="toc__h3">
            <a href="#b3_solo_h3_9">使用监听</a>
        </li>
        <li class="toc__h2">
            <a href="#b3_solo_h2_10">总结</a>
        </li>
</ul>    </div>
    <div class="body--gray post__gray">
        <div class="wrapper comment">
<div class="comment__title">
    Responses
</div>
     <textarea rows="3" placeholder="Your comment here. Be cool. " id="comment"></textarea>

<ul id="comments">
<li id="1529475413084" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1501640283731_1516153588328.jpg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/alshin" target="_blank">alshin</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>同步问题我以为只有我遇到，老大还让我做过 geth,parity 的性能测试</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Jun 20, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1529475413084', 'alshin')">Reply</a>
    </div>
</li><li id="1520739352411" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1519134315251?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/dexter" target="_blank">dexter</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>补一下,刚开始接触时易走的坑, sendTransaction中的value 是wei值,10000 这种 几乎在后来的交易记录中看不到<br> 太小了</p> 
<p>value: web3.utils.toWei(要发几个以太币, 'ether')</p> 
<p>这样就能发送用户想要的eth币数量了</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 11, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520739352411', 'dexter')">Reply</a>
    </div>
</li><li id="1520602965321" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1441990773239_1482806503219.jpeg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/zonghua" target="_blank">zonghua</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>? 内不能给我个挖的教程</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520602965321', 'zonghua')">Reply</a>
    </div>
</li><li id="1520589185277" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1487667104882_1487667189622.jpeg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/ibut" target="_blank">ibut</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>关键名词要先解释下：<br> Geth 又名Go Ethereum. 是以太坊协议的三种实现之一，由Go语言开发，完全开源的项目。<br> Geth是以太坊协议的具体落地实现，通过Geth，你可以实现以太坊的各种功能,如账户的新建编辑删除，开启挖矿，ether币的转移，智能合约的部署和执行等等。</p> 
<p>打币的时候不是还可以添加备注吗？没看到</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520589185277', 'ibut')">Reply</a>
    </div>
</li><li id="1520588564863" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1468917958725_1487320666085.jpeg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/Stone" target="_blank">Stone</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>虽然不知道你在说什么，但是看起来很牛逼的样子（实际上也一定很牛逼）！<br> 送你一朵小红花吧?</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520588564863', 'Stone')">Reply</a>
    </div>
</li><li id="1520585408168" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1437187265889_1482892516923.png?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/jama" target="_blank">jama</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>完全不懂说的啥，看来我在技术这条路越走越远了啊</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520585408168', 'jama')">Reply</a>
    </div>
</li><li id="1520584214927" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1507862395811_1519524078673.jpg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/kafuly" target="_blank">kafuly</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>大D的技术就是牛逼</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520584214927', 'kafuly')">Reply</a>
    </div>
</li><li id="1520584164235" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1502275786622_1516612497488.jpg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/fei123" target="_blank">fei123</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>666666</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520584164235', 'fei123')">Reply</a>
    </div>
</li><li id="1520584154249" class="item">
    <div class="fn__clear">
        <div class="item__avatar" style="background-image: url(https://img.hacpai.com/avatar/1507862395811_1519524078673.jpg?imageView2/1/w/80/h/80/interlace/0/q/100)"></div>
        <div class="item__name">
            <a class="ft__link" href="https://hacpai.com/member/kafuly" target="_blank">kafuly</a>

        </div>
    </div>
    <div class="vditor-reset">
    <p>nice ，good job mark</p>
    </div>
    <div class="item__meta fn__clear">
        <time>
        Mar 10, 2018
        </time>
            <a class="fn__right fn__none item__reply"
               href="javascript:page.toggleEditor('1520584154249', 'kafuly')">Reply</a>
    </div>
</li></ul>

            <div class="post__list fn__flex">
                <div class="fn__flex-1">
                    <div id="externalRelevantArticles"></div>
                </div>
                <div class="post__list-mid fn__flex-1">
                    <div id="randomArticles"></div>
                </div>
                <div class="fn__flex-1">
                    <div id="relevantArticles"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="post__fix">
        <div class="wrapper">
            <span class="post__share mobile__none">
                Share
                <span class="tag tag--4" data-type="weibo">WeiBo</span>
                <span class="tag tag--5" data-type="twitter">Twitter</span>
                <span class="tag tag--6" data-type="qqz">QZone</span>
                <span class="post__code tag tag--7"
                      data-type="wechat"
                      data-title="以太坊 JavaScript API web3.js 打币"
                      data-blogtitle="D 的个人博客"
                      data-url="https://88250.github.io/articles/2018/03/09/1520583695227.html"
                      data-avatar="https://img.hacpai.com/avatar/1353745196354_1572999872077.png?imageView2/1/w/128/h/128/interlace/0/q/100">WeChat</span>
            </span>
            <span class="post__arrow">
                    <a href="https://88250.github.io/articles/2018/02/24/1519471473213.html" rel="prev"
                       class="vditor-tooltipped__n vditor-tooltipped"
                       pjax-title="重装系统后 git 烂了"
                       aria-label="旧一篇: 重装系统后 git 烂了">←</a>

                    <a href="https://88250.github.io/articles/2018/03/11/1520767628593.html" rel="next"
                       class="vditor-tooltipped__n vditor-tooltipped"
                       pjax-title="以太坊同步一直“卡着”的原因"
                       aria-label="新一篇: 以太坊同步一直“卡着”的原因">→</a>
                <a href="javascript:Util.goTop()" class="vditor-tooltipped__n vditor-tooltipped"
                   aria-label="移动到顶部">↑</a>
                <a href="javascript:Util.goBottom()" class="vditor-tooltipped__n vditor-tooltipped"
                   aria-label="移动到底部">↓</a>
            </span>
        </div>
    </div>
    
</main>
<footer class="footer">
    <div class="ft__center">
    <a href="https://hacpai.com/member/88250"
       aria-label="https://hacpai.com/member/88250"
       class="vditor-tooltipped__n vditor-tooltipped  user__site"
       target="_blank" rel="noopener nofollow">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path fill="#d23f31" style="fill: var(--color1, #d23f31)" d="M5.787 17.226h17.033l5.954 9.528c0.47 0.752 0.003 1.361-1.042 1.361h-15.141z"></path>
            <path d="M10.74 3.927h17.033c1.045 0 1.512 0.609 1.042 1.361l-5.954 9.528h-19.872l6.379-10.209c0.235-0.376 0.849-0.681 1.372-0.681z"></path>
            <path d="M2.953 17.226h2.839l6.804 10.889h-1.892c-0.523 0-1.137-0.305-1.372-0.681z"></path>
        </svg>
    </a>

        <a href="https://github.com/88250"
           aria-label="https://github.com/88250"
           class="vditor-tooltipped__n vditor-tooltipped  user__site"
           target="_blank" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M16 0.331c-8.836 0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182 0.8 0.148 1.094-0.347 1.094-0.77 0-0.381-0.015-1.642-0.022-2.979-4.452 0.968-5.391-1.888-5.391-1.888-0.728-1.849-1.776-2.341-1.776-2.341-1.452-0.993 0.11-0.973 0.11-0.973 1.606 0.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33 0.143-1.034 0.558-1.74 1.016-2.14-3.554-0.404-7.29-1.777-7.29-7.907 0-1.747 0.625-3.174 1.649-4.295-0.166-0.403-0.714-2.030 0.155-4.234 0 0 1.344-0.43 4.401 1.64 1.276-0.355 2.645-0.532 4.005-0.539 1.359 0.006 2.729 0.184 4.008 0.539 3.054-2.070 4.395-1.64 4.395-1.64 0.871 2.204 0.323 3.831 0.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295 0 6.145-3.743 7.498-7.306 7.895 0.574 0.497 1.085 1.47 1.085 2.963 0 2.141-0.019 3.864-0.019 4.391 0 0.426 0.288 0.925 1.099 0.768 6.354-2.118 10.933-8.113 10.933-15.18 0-8.837-7.164-16-16-16z"></path>
            </svg>
        </a>

    </div>
    <nav class="footer__nav mobile__none">
            <a class="ft__link" href="https://88250.b3log.org/about" target="_self" rel="section">
                关于我
            </a>
            <a class="ft__link" href="/my-github-repos" target="_self" rel="section">
                我的开源
            </a>
            <a class="ft__link" href="https://hacpai.com" target="_blank" rel="section">
                黑客派
            </a>
            <a class="ft__link" href="https://b3log.org" target="_blank" rel="section">
                B3log
            </a>
        <a class="ft__link" rel="alternate" href="https://88250.github.io/rss.xml" rel="section">RSS</a>
        <a class="ft__link" href="https://88250.github.io/start">开始使用</a>
    </nav>
    <div class="footer__border mobile__none"></div>
    <div class="wrapper fn__flex">
        <div class="fn__flex-1 mobile__none">
            <div class="ft__fade">88250 - 开源程序员，自由职业者</div><br>
                <div>
小而美的 Java 博客系统 <a style="text-decoration: none;" target="_blank" href="https://github.com/b3log/solo"><span style="color: orangered; font-weight: bold;">Solo</span></a><br/>
Golang 在线 IDE <a style="text-decoration: none;" target="_blank" href="https://wide.b3log.org"><span style="color: #4183c4; font-weight: 
bold;">Wide</span></a><br/>
黑客与画家的社区 <a style="text-decoration: none;" target="_blank" href="https://hacpai.com/register?r=88250"><span style="color: #f47e00; font-weight: 
bold;">Sym</span></a>
</div>
        </div>

            <div class="footer__mid fn__flex-1 mobile__none">
                <div class="ft__fade">分类</div> <br>
                    <a href="https://88250.github.io/category/dev-language"
                       aria-label="36 个标签"
                       class="ft__link ft__nowrap vditor-tooltipped vditor-tooltipped__n">
                        编程语言</a> &nbsp; &nbsp;
                    <a href="https://88250.github.io/category/past-summary"
                       aria-label="3 个标签"
                       class="ft__link ft__nowrap vditor-tooltipped vditor-tooltipped__n">
                        往事与总结</a> &nbsp; &nbsp;
                    <a href="https://88250.github.io/category/i-love-opensource"
                       aria-label="29 个标签"
                       class="ft__link ft__nowrap vditor-tooltipped vditor-tooltipped__n">
                        开源项目</a> &nbsp; &nbsp;
                    <a href="https://88250.github.io/category/linux"
                       aria-label="9 个标签"
                       class="ft__link ft__nowrap vditor-tooltipped vditor-tooltipped__n">
                        Linux</a> &nbsp; &nbsp;
                    <a href="https://88250.github.io/category/arch"
                       aria-label="3 个标签"
                       class="ft__link ft__nowrap vditor-tooltipped vditor-tooltipped__n">
                        架构设计</a> &nbsp; &nbsp;
                    <a href="https://88250.github.io/category/database"
                       aria-label="4 个标签"
                       class="ft__link ft__nowrap vditor-tooltipped vditor-tooltipped__n">
                        数据库</a> &nbsp; &nbsp;
            </div>

        <div class="fn__flex-1 footer__copyright">
            <a class="ft__link" href="https://88250.github.io/archives.html">
            404
            文章
            </a> &nbsp; &nbsp;
            2,019
            评论 <br>
            <span data-uvstaturl="https://88250.github.io">0</span> <span class="ft-gray">浏览</span> &nbsp; &nbsp;
            4 <span class="ft-gray">当前访客</span> <br>
            &copy; 2020
            <a class="ft__link" href="https://88250.github.io">D 的个人博客</a>
            
            <br>
            Powered by <a class="ft__link" href="https://solo.b3log.org" target="_blank">Solo</a>
            <br>
            Theme Pinghsu
            <sup>[<a class="ft__link" target="_blank" href="https://github.com/chakhsu/pinghsu">ref</a>]</sup>
            by <a class="ft__link" href="http://vanessa.b3log.org" target="_blank">Vanessa</a>
        </div>
    </div>
</footer>
<script type="text/javascript" src="https://88250.github.io/js/lib/compress/pjax.min.js" charset="utf-8"></script>
<script type="text/javascript" src="https://88250.github.io/js/common.js?1578447774338"
        charset="utf-8"></script>
<script type="text/javascript" src="https://88250.github.io/skins/Pinghsu/js/headroom.js"
        charset="utf-8"></script>
<script type="text/javascript"
        src="https://88250.github.io/skins/Pinghsu/js/common.js?1578447774338"
        charset="utf-8"></script>
<script src="https://cdn.jsdelivr.net/npm/uvstat@v1.0.2/dist/index.min.js"></script>
<script>
    var Label = {
        servePath: "https://88250.github.io",
        staticServePath: "https://88250.github.io",
        luteAvailable: false,
        hljsStyle: 'monokai',
        langLabel: "zh_CN",
        version: "3.6.8",
    }
    Util.init()
</script>
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/kanbanniang@0.2.1/index.css"/>
<script async src="https://cdn.jsdelivr.net/npm/kanbanniang@0.2.1/index.js"></script>
<div class="solo-kanbanniang">
    <div class="solo-kanbanniang__tip"></div>
    <canvas id="soloKanbanniang" width="280" height="250"></canvas>
    <div class="solo-kanbanniang__tool">
        <svg id="soloKanbanniangHome" viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32 18.967l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18.516v12h-8v-8h-8v8h-8v-12l12-9z"></path>
        </svg>
        <svg id="soloKanbanniangRSS" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M320.364 768q0 45.728-32 77.728t-77.728 32-77.728-32-32-77.728 32-77.728 77.728-32 77.728 32 32 77.728zM612.94 838.272q1.152 16-9.728 27.424-10.272 12-26.848 12h-77.152q-14.272 0-24.576-9.44t-11.424-23.712q-12.576-130.848-105.44-223.712t-223.712-105.44q-14.272-1.152-23.712-11.424t-9.44-24.576V402.24q0-16.576 12-26.848 9.728-9.728 24.576-9.728h2.848q91.424 7.424 174.848 46.016t148 103.712q65.152 64.576 103.712 148t46.016 174.848z m292.576 1.152q1.152 15.424-10.272 26.848-10.272 11.424-26.272 11.424h-81.728q-14.848 0-25.44-10.016t-11.136-24.288q-6.848-122.848-57.728-233.44t-132.288-192-192-132.288-233.44-58.272q-14.272-0.576-24.288-11.136t-10.016-24.864V109.664q0-16 11.424-26.272 10.272-10.272 25.152-10.272h1.728q149.728 7.424 286.56 68.576t243.136 168q106.848 106.272 168 243.136t68.576 286.56z"></path>
        </svg>
        <svg id="soloKanbanniangChat" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M802.42709 96.163153H219.476155c-84.48109 0-154.896836 71.746044-154.896836 157.840888v393.119449c0 86.072331 70.415746 157.819398 154.896836 157.819399h214.038818V925.470963s22.526039 40.168862 64.767096 5.734608c30.965246-25.819039 126.721123-91.828428 171.775248-123.385145h132.369773c84.502579 0 154.896836-83.21526 154.896836-157.839865V251.125481c0-86.094844-70.394257-154.962328-154.896836-154.962328zM301.144176 518.002714c-39.427988 0-70.416769-31.576159-70.416769-71.746044 0-40.168862 30.988782-71.746044 70.416769-71.746044 39.426965 0 70.393233 31.577183 70.393234 71.746044 0 40.169885-30.966269 71.746044-70.393234 71.746044z m208.411657 0c-39.450501 0-70.415746-31.576159-70.415746-71.746044 0-40.168862 30.965246-71.746044 70.415746-71.746044 39.405475 0 70.394257 31.577183 70.394257 71.746044 0 40.169885-30.988782 71.746044-70.394257 71.746044z m211.203236 0c-39.426965 0-70.416769-31.576159-70.416769-71.746044 0-40.168862 30.988782-71.746044 70.416769-71.746044s70.415746 31.577183 70.415746 71.746044c-0.001023 40.169885-30.988782 71.746044-70.415746 71.746044z"></path>
        </svg>
        <svg id="soloKanbanniangChange" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M936.672 193.216l-226.88-64c-8.704-2.528-18.112-1.12-25.824 3.776-7.68 4.864-12.896 12.736-14.432 21.728C655.712 236.928 595.328 288 512 288c-71.424 0-142.464-103.296-163.776-143.104-7.136-13.28-22.528-19.84-37.024-15.68l-224 64C73.472 197.152 64 209.728 64 224v256a31.93 31.93 0 0 0 11.712 24.736c7.392 6.08 17.152 8.512 26.56 6.624L224 487.04V832c0 52.928 43.072 96 96 96h384c52.928 0 96-43.072 96-96V519.04l121.728 24.352c9.44 1.92 19.2-0.544 26.56-6.624C955.68 530.656 960 521.6 960 512V224c0-14.336-9.536-26.912-23.328-30.784zM672 800H352c-17.664 0-32-14.304-32-32s14.336-32 32-32h320c17.696 0 32 14.304 32 32s-14.304 32-32 32z"></path>
        </svg>
        <svg id="soloKanbanniangPhoto" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M898.048 258.048q23.552-1.024 46.592 9.216t40.96 27.136 28.672 39.424 10.752 46.08l0 390.144q0 24.576-10.752 47.104t-28.672 40.448-40.96 28.16-47.616 10.24l-697.344 0q-24.576 0-48.64-10.24t-42.496-27.648-29.696-40.448-11.264-48.64l0-381.952q0-22.528 10.752-45.568t28.672-41.472 39.936-30.208 44.544-11.776l63.488 0 13.312-83.968q3.072-20.48 18.432-32.768t34.816-12.288l456.704 0q19.456 0 34.304 10.752t16.896 34.304l14.336 83.968 54.272 0zM548.864 712.704q40.96 0 77.824-15.872t63.488-42.496 42.496-62.976 15.872-77.312-15.872-77.312-42.496-62.976-63.488-42.496-77.824-15.872-77.312 15.872-63.488 42.496-43.008 62.976-15.872 77.312 15.872 77.312 43.008 62.976 63.488 42.496 77.312 15.872z"></path>
        </svg>
        <svg id="soloKanbanniangGithub" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M1024 524.8c0 114.346667-32.554667 217.216-97.706667 308.565333-65.066667 91.306667-149.162667 154.538667-252.288 189.610667-11.989333 2.304-20.778667 0.682667-26.325333-4.778667a27.605333 27.605333 0 0 1-8.362667-20.48v-144.213333c0-44.16-11.52-76.501333-34.645333-97.024 25.344-2.730667 48.085333-6.826667 68.309333-12.288a268.629333 268.629333 0 0 0 62.72-26.666667 187.434667 187.434667 0 0 0 53.973334-45.44c14.421333-18.005333 26.197333-41.898667 35.328-71.765333 9.088-29.824 13.653333-64.128 13.653333-102.826667 0-55.125333-17.536-102.058667-52.650667-140.8 16.426667-41.429333 14.677333-87.893333-5.333333-139.392-12.458667-4.096-30.464-1.578667-54.016 7.509334a355.328 355.328 0 0 0-61.312 30.08L640 271.274667a462.336 462.336 0 0 0-128-17.749334c-43.989333 0-86.656 5.930667-128 17.749334a589.824 589.824 0 0 0-28.330667-18.432c-11.776-7.253333-30.336-16.042667-55.68-26.325334-25.344-10.24-44.416-13.312-57.301333-9.216-19.584 51.498667-21.12 97.962667-4.693333 139.434667-35.114667 38.698667-52.650667 85.632-52.650667 140.757333 0 38.698667 4.565333 72.874667 13.653333 102.485334 9.130667 29.610667 20.778667 53.546667 34.986667 71.765333 14.250667 18.218667 32.128 33.493333 53.674667 45.781333 21.546667 12.288 42.453333 21.205333 62.677333 26.666667 20.224 5.461333 43.008 9.557333 68.309333 12.288-17.749333 16.384-28.629333 39.850667-32.64 70.4a130.005333 130.005333 0 0 1-29.994666 10.24c-10.666667 2.261333-23.338667 3.413333-37.973334 3.413333-14.72 0-29.269333-4.906667-43.690666-14.677333-14.464-9.813333-26.794667-24.064-36.992-42.709333a109.226667 109.226667 0 0 0-32.341334-35.541334c-13.141333-9.130667-24.106667-14.592-33.024-16.426666l-13.312-2.048c-9.344 0-15.786667 1.024-19.328 3.072-3.584 2.090667-4.693333 4.693333-3.328 7.893333 1.28 3.157333 3.328 6.4 5.973334 9.557333 2.688 3.2 5.546667 5.930667 8.661333 8.192l4.693333 3.413334c9.770667 4.565333 19.413333 13.226667 29.013334 25.984 9.514667 12.757333 16.512 24.362667 20.992 34.858666l6.656 15.701334c5.76 17.322667 15.530667 31.317333 29.312 42.026666 13.781333 10.666667 28.672 17.536 44.672 20.48 16 2.986667 31.445333 4.565333 46.336 4.821334 14.890667 0.213333 27.221333-0.597333 36.992-2.389334l15.36-2.730666c0 17.28 0.085333 37.546667 0.298666 60.8l0.341334 36.906666a27.050667 27.050667 0 0 1-8.661334 20.48c-5.76 5.461333-14.677333 7.082667-26.666666 4.778667-103.125333-35.072-187.221333-98.261333-252.330667-189.610667C32.554667 742.058667 0 639.146667 0 524.8c0-95.232 22.869333-183.04 68.693333-263.466667A516.266667 516.266667 0 0 1 254.976 70.4C333.44 23.466667 419.114667 0 512 0c92.885333 0 178.56 23.466667 256.981333 70.4a516.266667 516.266667 0 0 1 186.368 190.976C1001.130667 341.802667 1024 429.653333 1024 524.842667z"></path>
        </svg>
        <svg id="soloKanbanniangClose" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M517.572566143763 1018.6748601482986C238.26554897656422 1018.6748601482986 11.897910175114305 792.2714997690043 11.897910175114305 513.0002041796496c0-279.3070171671984 226.36763880144977-505.71037754649296 505.6746559686481-505.71037754649296 279.2712955893538 0 505.6746559686481 226.40336037929444 505.6746559686481 505.71037754649296C1023.2472221124112 792.2714997690043 796.8795833109612 1018.6748601482986 517.572566143763 1018.6748601482986zM754.7281214542927 339.25044954334646c13.752807470184345-13.752807470184345 9.680547595895998-40.186775075214015-9.073280772537204-58.94060344364717l-2.143294670678079-2.1075730928334457c-18.7538283684332-18.7538283684332-45.15207439561819-22.861809820566194-58.90488186580257-9.073280772537204l-168.21291007038468 168.24863164822932-180.42968969324974-180.46541127109438c-13.967136937252159-13.967136937252159-40.72259874288353-9.823433907274534-59.72647815622916 9.216167083915742l-2.143294670678079 2.143294670678079c-19.039600991190277 19.003879413345654-23.111860865478626 45.75934121897699-9.180445506071107 59.655035000539876l180.42968969324974 180.46541127109438-176.07165719620428 176.03593561835962c-13.788529048028984 13.824250625873615-9.716269173740633 40.151053497369375 9.073280772537204 58.94060344364717l2.1075730928334457 2.1075730928334457c18.7538283684332 18.7538283684332 45.15207439561819 22.897531398410823 58.90488186580257 9.073280772537204l176.10737877404887-176.10737877404887 170.39192631890742 170.42764789675192c13.967136937252159 13.931415359407513 40.686877165038865 9.85915548511917 59.690756578384516-9.180445506071107l2.1790162485227142-2.1790162485227142c19.039600991190277-18.968157835501014 23.147582443323273-45.72361964113239 9.180445506071107-59.690756578384516l-170.39192631890742-170.42764789675192L754.7281214542927 339.25044954334646z"></path>
        </svg>
    </div>
</div>


<script type="text/javascript">
    Util.addScript('https://88250.github.io/js/page.js?1578447774338', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论内容只能为 2 到 500 个字符！",
        "oId": "1520583695227",
        "blogHost": "https://88250.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "7";
    page.loadRandomArticles('<h3>RECOMMEND POSTS</h3>');
    page.loadExternalRelevantArticles("区块链,以太坊,Web3,ABI",
    '<h3>HACPAI POSTS</h3>');
    page.loadRelevantArticles('1520583695227', '<h3>RELEVANT POSTS</h3>');
Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 183ms, 2020/01/08 09:43:59 -->